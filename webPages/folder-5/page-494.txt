Identity and Access Management Home Index Search Log In History Latest Changes services/GTED Datawarehouse tables GTED Datawarehouse tables GTED data is a compilation of identity data from various authoritative sources, including HR data, Student data from Banner, Account data from Mage, Guest data from Passport, GTAD data, etc. This is used for authorization, vetting, provisioning and other IAM functions internally, as well as being made avail for applications if data stewards approve it. Some GTED people and account data is extracted to the Data Warehouse (dwprod) regularly and is available by SQL. Basic GTED people and account data is exported hourly from GTED into comma separated files and uploaded into sql tables in the data warehouse (mostly once per day). These table names in the data warehouse are: Table or View Status Update frequency GTED_ACCOUNTS Current hourly GTED_ACCTS_CATEGORIES Current nightly GTED_ACCTS_ENTITLEMENTS Current-Will be deprecated nightly GTED_ACCOUNTS_ENTITLEMENT New 2019 hourly GTED_ACCOUNTS_AFFILIATION New 2019/IAM Internal only hourly GTED_ACCOUNTSSCOPEDAFFILIATION New 2019/IAM Internal only hourly GTED_PEOPLE deprecated nightly GTED_PEOPLE_AFFILIATION Current nightly GTED_PEOPLE_EMAIL Current nightly GTED_PEOPLE_SCOPED_AFFILIATION Current hourly GTED_PEOPLE_TITLES Current nightly PEOPLE_ENTITLEMENTS New hourly PEOPLE2 Deprecated nightly PEOPLE3 New hourly ACCOUNT View of gted_accounts hourly ACCOUNTS2 View of gted_accounts hourly PEOPLE_EMAIL2 View GT_COMPUTER_IDS Internal nightly PEOPLE_GTCOURSEINFORMATION New 2016/IAM Internal use hourly PEOPLE_CURRICULUM New 2016/IAM Internal use hourly PEOPLE_INTERNAL_P_ENTITLEMENTS New/2017/IAM Internal Use hourly GTED_EMERGENCY_CONTACTS Internal Use hourly Table Details See below for details on schema for these tables. In addition there are new views that are helpful, using the same key as PEOPLE2 or PEOPLE3: ACCOUNT2 (like GTED_ACCOUNTS but using index of GTPERSONDIRECTORYID ) PEOPLE_EMAIL2 (like GTED_PEOPLE_EMAIL but using index of GTPERSONDIRECTORYID ) INDEXVIEW (includes only identifiers like GTPERSONDIRECTORYID, GTGTID, GTPIDM, GTIMSID, GTEMPLID, GTMAGEPERSONINDEX, GTMAGEGUESTINDEX, GTGUESTIDENTITYSPONSOR, GTACCESSCARDNUMBER from the PEOPLE2 table) Requesting Access Access to this data can be requested via the normal request method by filling out this form: http://iamweb1.iam.gatech.edu/docs/services/how-to-request-iam-service This will ensure that data stewardship is considered, and a service ticket is automatically created on your behalf for tracking purposes. To use SQL access to the data warehouse tables, you must choose “GTED (SQL)” on this form. GTED_ACCOUNTS U_ID VARCHAR2(300) Name of the account, like jb123, gtg123, or jsmith5 PERSON_DIRECTORY_ID VARCHAR2(300) Unique identifier for the account’s owner in GTED UID_NUMBER VARCHAR2(70) Numeric Unix UID for the account REPRESENTS_PERSON_FLAG VARCHAR2(12) True for personal accounts or False for service accounts GTED_ACCOUNTS_CATEGORIES U_ID VARCHAR2(300) ACCOUNT_CATEGORY VARCHAR2(300) GTED_ACCTS_ENTITLEMENTS U_ID VARCHAR2(300) ENTITLEMENT VARCHAR2(300) Approx 18544327 entries. GTED_ACCOUNTS_ENTITLEMENTS U_ID VARCHAR2(300) ENTITLEMENT VARCHAR2(300) Each account may have multiple entitlements in GTED, so will have multiple rows in this table. sak-student4|”/gt/services/central/spectrum/enabled” sak-student4|”/gt/services/central/lawn/enabled” sak-student4|”/gt/services/central/sakai/enabled” sak-student5|”/gt/services/central/gtad/enabled” sak-student5|”/gt/services/central/spectrum/enabled” sak-student5|”/gt/services/central/lawn/enabled” sak-student5|”/gt/services/central/sakai/enabled” GTED_ACCOUNTS_AFFILIATION U_ID VARCHAR2(40) AFFILIATION VARCHAR2(300) has values like employee, student, staff GTED_ACCOUNTSSCOPEDAFFILIATION U_ID VARCHAR2(40) AFFILIATION VARCHAR2(300) has valueslike employee@dept, employee@gt (sorry for the horrible name, but oracle has a 30char limit) ACCOUNTS2 U_ID VARCHAR2(300) Name of the account, like jb123, gtg123, or jsmith5 GTPERSONDIRECTORYID VARCHAR2(300) Unique identifier for the account’s owner in GTED UID_NUMBER VARCHAR2(70) Name of the account, like jb123, gtg123, or jsmith5 REPRESENTS_PERSON_FLAG VARCHAR2(12) True for personal accounts or False for service accounts GTED_PEOPLE (deprecated, please use PEOPLE3) GTID VARCHAR2(9) GT ID from Banner (empty for guests) EMAIL VARCHAR2(200) Primary email address in GTED PRIMARY_AFFILIATION VARCHAR2(70) From GTED eduPersonPrimaryAffiliation, and is their strongest affiliation with GT (see below) PERSON_DIRECTORY_ID VARCHAR2(300) the primary person identifier which unifies Guests and people with GTIDs. This is the one identifier that all people objects have in GTED. PRIMARY_GTACCOUNT_USERNAME VARCHAR2(300) The person’s primary GT account username. A person can have many accounts, but this is their main account for their main role at GT. MAGE_GUEST_INDEX VARCHAR2(70) The Guest identifier from Mage (empty forpeople with GTIDs) CONFIDENTIALITY_FLAG VARCHAR2(20) YES for students with the registrar confidentiality flag set in Banner Each field is double quoted and there is a comma between each field. If the data does not exist for the person, an empty field is generated. Here is an example where the confidential flag is set: "900055555","ex16@gatech.edu","member","B0FA68A4D594FFCAA028585966666666","ex16","","YES" … or not set: "900055555","ex16@gatech.edu","member","B0FA68A4D594FFCAA028585966666666","ex16","","" Primary Affiliation is from GTED eduPersonPrimaryAffiliation, and is their strongest affiliation with GT. GTED_PEOPLE_AFFILIATION PERSON_DIRECTORY_ID VARCHAR2(240) AFFILIATION VARCHAR2(240) Each person can have multiple affilations at GT, so they will have multiple lines in this table, one for each affiliation in GTED GTED_PEOPLE_EMAIL PERSON_DIRECTORY_ID VARCHAR2(240) EMAIL VARCHAR2(540) Each line has an ID and a quoted value of an email address. These come from GTED gtSecondaryMailAddress attributes, so is a list of all email addresses known for that person by GTED or Mage. Each person can have multiple lines, one for each email address. 909470BAFFF88F56DB9F1677C0093FB0 bryson@oit.gatech.edu 909470BAFFF88F56DB9F1677C0093FB0 jb434@mail.gatech.edu 909470BAFFF88F56DB9F1677C0093FB0 jb434@oit.gatech.edu 909470BAFFF88F56DB9F1677C0093FB0 john.bryson@oit.gatech.edu 909470BAFFF88F56DB9F1677C0093FB0 johnbryson@gatech.edu 909470BAFFF88F56DB9F1677C0093FB0 oittest@oit.gatech.edu 909470BAFFF88F56DB9F1677C0093FB0 pmx@mail.gatech.edu 909470BAFFF88F56DB9F1677C0093FB0 isspam@mail.gatech.edu 909470BAFFF88F56DB9F1677C0093FB0 notspam@mail.gatech.edu 909470BAFFF88F56DB9F1677C0093FB0 is-spam@gatech.edu 909470BAFFF88F56DB9F1677C0093FB0 not-spam@gatech.edu 909470BAFFF88F56DB9F1677C0093FB0 iam-changereview@oit.gatech.edu GTED_PEOPLE_SCOPED_AFFILIATION PERSON_DIRECTORY_ID VARCHAR2(240) [SCOPED_AFFILIATION]((GTED/GTED-Attributes#affiliations) VARCHAR2(240) Scopped affiliations are just like non-scopped affiliations, but they have … scopes. Maybe an example would help. An employee might have these affiliations: member employee staff That same employee might have these scoped affiliations, depending on department membership: member@gt member@gtaccounts member@oit member@psdept 652:oit-its:oit-information tech services member@psdept 653:oit-eis:oit-enterprise information sys employee@gt employee@oit employee@psdept 653:oit-eis:oit-enterprise information sys staff@gt staff@oit staff@psdept 653:oit-eis:oit-enterprise information sys GTED_PEOPLE_TITLES PERSON_DIRECTORY_ID VARCHAR2(240) TITLE VARCHAR2(540) Each record will have and ID and a title from GTED. Each person can have multiple lines, one for each title in GTED (from Peoplesoft HR): D94008DA1FBEEBFB934BD8679EE16FE2 Int Tax Compliance Spec:422X56@gt D94008DA1FBEEBFB934BD8679EE16FE2 Int Tax Compliance Spec:422X56@ohr D94008DA1FBEEBFB934BD8679EE16FE2 Int Tax Compliance Spec:422X56@psdept 820:OHR:Human Resources, AVP C064DDB7351E926904BCD1F2CC3FF197 Misc-Tech Temp:510X37@gt C064DDB7351E926904BCD1F2CC3FF197 Misc-Tech Temp:510X37@psdept 114:IPST-GT:Inst of Paper Sci & Tech at GT 78193E7460182FB3A6216CE7D0576C58 Affiliate:995X03@gt 78193E7460182FB3A6216CE7D0576C58 Affiliate:995X03@me 78193E7460182FB3A6216CE7D0576C58 Affiliate:995X03@psdept 250:ME:Mechanical Engineering PEOPLE_EMAIL2 GTPERSONDIRECTORYID VARCHAR2(240) EMAIL VARCHAR2(540) PEOPLE_ENTITLEMENTS GTPERSONDIRECTORYID NOT NULL VARCHAR2(256) ENTITLEMENT NOT NULL VARCHAR2(2048) PEOPLE2 (deprecated, please use PEOPLE3) GTPERSONDIRECTORYID VARCHAR2(256) GTGTID VARCHAR2(32) GTPIDM VARCHAR2(32) GTIMSID VARCHAR2(32) GTEMPLID VARCHAR2(32) GTMAGEPERSONINDEX VARCHAR2(32) GTMAGEGUESTINDEX VARCHAR2(32) GTGUESTIDENTITYSPONSOR VARCHAR2(256) GTACCESSCARDNUMBER VARCHAR2(256) EDUPERSONPRIMARYAFFILIATION VARCHAR2(256) GTPRIMARYAFFILIATION VARCHAR2(256) GTLEGALCN VARCHAR2(256) GTLEGALDISPLAYNAME VARCHAR2(256) DISPLAYNAME VARCHAR2(256) CN VARCHAR2(256) SN VARCHAR2(256) GIVENNAME VARCHAR2(256) INITIALS VARCHAR2(256) GTEMPLOYEEHOMEDEPARTMENTNUMBER VARCHAR2(32) GTEMPLOYEEHOMEDEPARTMENTNAME VARCHAR2(256) MAIL VARCHAR2(256) HOMEPHONE VARCHAR2(256) HOMEPOSTALADDRESS VARCHAR2(256) TELEPHONENUMBER VARCHAR2(256) PEOPLE3 GTPERSONDIRECTORYID NOT NULL VARCHAR2(128) GTGTID VARCHAR2(9) GTPIDM NUMBER(8) GTIMSID VARCHAR2(32) GTEMPLID VARCHAR2(11) GTMAGEPERSONINDEX NUMBER(8) GTMAGEGUESTINDEX NUMBER(8) GTROLEINDEX NUMBER(8) GTGUESTIDENTITYSPONSOR VARCHAR2(128) GTACCESSCARDNUMBER VARCHAR2(64) EDUPERSONPRIMARYAFFILIATION VARCHAR2(64) GTPRIMARYAFFILIATION VARCHAR2(64) GTLEGALCN VARCHAR2(256) GTLEGALDISPLAYNAME VARCHAR2(256) DISPLAYNAME VARCHAR2(256) CN VARCHAR2(256) SN VARCHAR2(256) GIVENNAME VARCHAR2(128) INITIALS VARCHAR2(128) GTEMPLOYEEHOMEDEPARTMENTNUMBER VARCHAR2(32) GTEMPLOYEEHOMEDEPARTMENTNAME VARCHAR2(64) MAIL VARCHAR2(256) HOMEPHONE VARCHAR2(256) HOMEPOSTALADDRESS VARCHAR2(256) GTPRIEMPLOYEEGTACCOUNTUSERNAME VARCHAR2(256) GTPRISTUDENTGTACCOUNTUSERNAME VARCHAR2(256) GTPRIMARYGTACCOUNTUSERNAME VARCHAR2(256) GTSTUDENTCONFIDENTIALITY VARCHAR2(256) GTFERPACONFIDENTIALITYAPPLIES VARCHAR2(256) TELEPHONENUMBER VARCHAR2(256) PEOPLE_GTCURRICULUM GTPERSONDIRECTORYID NOT NULL VARCHAR2(128) GTCURRICULUM NOT NULL VARCHAR2(256) PEOPLE_GTCOURSEINFORMATION GTPERSONDIRECTORYID NOT NULL VARCHAR2(128) GTED_COURSE_ATTRIBUTE_NAME NOT NULL VARCHAR2(64) COURSE NOT NULL VARCHAR2(256) PEOPLE_INTERNAL_P_ENTITLEMENTS GTPERSONDIRECTORYID NOT NULL VARCHAR2(128) ENTITLEMENT NOT NULL VARCHAR2(256) GTED_EMERGENCY_CONTACTS This is the contact data collected and maintained by users, in Passport, which then flows to the data warehouse. This is for GT internal use. CONTACT_INDEX NUMBER PERSON_DIRECTORY_ID VARCHAR2(300) CONTACT_ORDER NUMBER NAME VARCHAR2(255) EMAIL VARCHAR2(255) PHONE VARCHAR2(255) RELATIONSHIP VARCHAR2(255) ADDRESS VARCHAR2(2048) TIMESTAMP_CREATED DATE TIMESTAMP_UPDATED DATE Usage Cautions: The older tables are created nightly from files exported from GTED (GT enterprise directory). These are truncated and rebuilt nightly, so there are short time periods where they are empty. However, the newer tables are being updated hourly, and eventually all of these tables will be replaced with this new process. These tables are mostly marked as ‘deprecated’ at this point. Note the name of the primary identifier is different in old tables (PERSON_DIRECTORY_ID) and new ones (GTPERSONDIRECTORYID). Guests do not have GTIDs, so to include them you must join on GTPERSONDIRECTORYID, not GTID. Some fields are not guaranteed to have a value so you may need to do subqueries or LEFT JOIN to get all expected rows sometimes. Some views were created to make joins easier. For example, these were created to rename PERSON_DIRECTORY_ID to GTPERSONDIRECTORYID. create view gted.indexview as
  select
    GTPERSONDIRECTORYID,GTGTID,GTPIDM,GTIMSID,GTEMPLID,GTMAGEPERSONINDEX,GTMAGEGUESTINDEX,
    GTGUESTIDENTITYSPONSOR,GTACCESSCARDNUMBER
  from GTED.PEOPLE2; create view gted.accounts2 (U_ID,GTPERSONDIRECTORYID,UID_NUMBERREPRESENTS_PERSON_FLAG) as
  select * from gted.gted_people_email; create view gted.people_email2 (GTPERSONDIRECTORYID,email) as 
  select * from gted.gted_people_email; Usage Examples: o To get a list of employees gtid, primary username and primary email, delimited by colons, you might do this query: SELECT gtid ||’:’ || primary_gtaccount_username ||’:’||email||’:’ FROM gted.gted_people WHERE person_directory_id in (SELECT person_directory_id FROM GTED_PEOPLE_AFFILIATION WHERE affiliation in (‘employee’, ‘retiree’)) Notice the subquery to get a list of person_directory_ids which is the key/identifier for the table of person affiliations GTED_PEOPLE_AFFILIATION. Get a count of all people in the GTED sql table. select count(*) from GTED_PEOPLE; Get list of all gtids: (recall that guests don’t have gtids): select gtid from GTED_PEOPLE; Get a count and list of students with the confidentiality flag set: select count(*) from GTED_PEOPLE where CONFIDENTIALITY_FLAG=’YES’; select gtid from GTED_PEOPLE where CONFIDENTIALITY_FLAG=’YES’; Get all of John’s accounts: SELECT gtgtid, mail, u_id, gtemplid
  FROM gted.people2
  LEFT JOIN gted.gted_accounts ON (gted_accounts.person_directory_id=people2.gtpersondirectoryid)
  WHERE gtgtid='901828828'; 901828828 johnbryson@gatech.edu jb434 503728 901828828 johnbryson@gatech.edu bryson 503728 901828828 johnbryson@gatech.edu eiscbt1 503728 901828828 johnbryson@gatech.edu eiscbt2 503728 901828828 johnbryson@gatech.edu eiscbt3 503728 901828828 johnbryson@gatech.edu iam_read 503728 901828828 johnbryson@gatech.edu jbtwentytwocharname012 503728 901828828 johnbryson@gatech.edu johnb 503728 901828828 johnbryson@gatech.edu jb 503728 901828828 johnbryson@gatech.edu j 503728 SELECT gtgtid, mail, u_id, gtemplid
  FROM gted.people3
  LEFT JOIN gted.gted_accounts ON (gted_accounts.person_directory_id=people3.gtpersondirectoryid)
  WHERE gtgtid='901828828'; 901828828 johnbryson@gatech.edu jb434 503728 901828828 johnbryson@gatech.edu bryson 503728 901828828 johnbryson@gatech.edu eiscbt1 503728 901828828 johnbryson@gatech.edu eiscbt2 503728 901828828 johnbryson@gatech.edu eiscbt3 503728 901828828 johnbryson@gatech.edu iam_read 503728 901828828 johnbryson@gatech.edu jbtwentytwocharname012 503728 901828828 johnbryson@gatech.edu johnb 503728 901828828 johnbryson@gatech.edu jb 503728 901828828 johnbryson@gatech.edu j 503728 Notice the queries above didn’t show John’s service accounts. Just the accounts owned by his student or employee roles in Wand: Primary account: jb434
 Other accounts: bryson
                 eiscbt1
                 eiscbt2
                 eiscbt3
                 iam_read
                 j
                 jb
                 jbtwentytwocharname012
                 johnb That is correct because service accounts are not really owned by a person, but a Mage role. People who are required to do 2FA web logins: SELECT DISTINCT gtgtid  
  FROM people2 
  JOIN gted_accounts on (gtpersondirectoryid = person_directory_id) 
  JOIN gted_accts_entitlements using (u_id) 
  WHERE entitlement='/gt/central/services/iam/cas/cas-duorequired-prod/enabled' 
    AND gtgtid IS NOT NULL; People with accounts that are set up in Duo: SELECT DISTINCT gtgtid 
  FROM people2 
  JOIN gted_accounts on (gtpersondirectoryid = person_directory_id) 
  JOIN gted_accts_entitlements using (u_id) 
  WHERE entitlement='/gt/central/services/iam/two-factor/duo-user' 
    AND gtgtid IS NOT NULL; Get some common elements from People and accounts tables. Note the key is different on the new account table to make things easier: 
SELECT gtpidm, gtgtid, u_id, mail
      FROM gted.gted_accounts
      JOIN gted.people3
      ON (gtpersondirectoryid = person_directory_id)
      WHERE u_id = 'jb434' 

SELECT gtpidm, gtgtid, u_id, mail
      FROM gted.accounts2 a
      JOIN gted.people3 b
      ON (a.gtpersondirectoryid = b.GTPERSONDIRECTORYID)
      WHERE u_id = 'jb434'  Compare the old and newer GT Accounts tables select count(u_id) from  gted.accounts2 
select count(u_id) from  gted.gted_accounts Managing permissions As mentioned above, access requests are made through the normal IAM-request process The EIS Security or DBA teams are responsible for creating the dwprod-accessing accounts The accounts are then granted access to the necessary tables with queryDW “…” or gtsql-csv –system data_warehouse -q “…” where … is something like “GRANT SELECT on GTED.PEOPLE3 to application_account” Last edited by John M Bryson, 2022-09-13 15:35:57 Short link to this page Emergency Information Legal & Privacy Information Accessibility Accountability Accreditation Employment © 2014 Georgia Institute of Technology